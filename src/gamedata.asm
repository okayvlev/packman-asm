tiles db 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
      db 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
      db 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
      db 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
      db 0,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  0,  0,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  0
      db 0,  7,  0,  0,  0,  0,  7,  0,  0,  0,  0,  0,  7,  0,  0,  7,  0,  0,  0,  0,  0,  7,  0,  0,  0,  0,  7,  0
      db 0, 15,  0,  0,  0,  0,  7,  0,  0,  0,  0,  0,  7,  0,  0,  7,  0,  0,  0,  0,  0,  7,  0,  0,  0,  0, 15,  0
      db 0,  7,  0,  0,  0,  0,  7,  0,  0,  0,  0,  0,  7,  0,  0,  7,  0,  0,  0,  0,  0,  7,  0,  0,  0,  0,  7,  0
      db 0,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  0
      db 0,  7,  0,  0,  0,  0,  7,  0,  0,  7,  0,  0,  0,  0,  0,  0,  0,  0,  7,  0,  0,  7,  0,  0,  0,  0,  7,  0
      db 0,  7,  0,  0,  0,  0,  7,  0,  0,  7,  0,  0,  0,  0,  0,  0,  0,  0,  7,  0,  0,  7,  0,  0,  0,  0,  7,  0
      db 0,  7,  7,  7,  7,  7,  7,  0,  0,  7,  7,  7,  7,  0,  0,  7,  7,  7,  7,  0,  0,  7,  7,  7,  7,  7,  7,  0
      db 0,  0,  0,  0,  0,  0,  7,  0,  0,  0,  0,  0,  3,  0,  0,  3,  0,  0,  0,  0,  0,  7,  0,  0,  0,  0,  0,  0
      db 0,  0,  0,  0,  0,  0,  7,  0,  0,  0,  0,  0,  3,  0,  0,  3,  0,  0,  0,  0,  0,  7,  0,  0,  0,  0,  0,  0
      db 0,  0,  0,  0,  0,  0,  7,  0,  0,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  0,  0,  7,  0,  0,  0,  0,  0,  0
      db 0,  0,  0,  0,  0,  0,  7,  0,  0,  3,  0,  0,  0,  0,  0,  0,  0,  0,  3,  0,  0,  7,  0,  0,  0,  0,  0,  0
      db 0,  0,  0,  0,  0,  0,  7,  0,  0,  3,  0,  0,  0,  0,  0,  0,  0,  0,  3,  0,  0,  7,  0,  0,  0,  0,  0,  0
      db 3,  3,  3,  3,  3,  3,  7,  3,  3,  3,  0,  0,  0,  0,  0,  0,  0,  0,  3,  3,  3,  7,  3,  3,  3,  3,  3,  1
      db 0,  0,  0,  0,  0,  0,  7,  0,  0,  3,  0,  0,  0,  0,  0,  0,  0,  0,  3,  0,  0,  7,  0,  0,  0,  0,  0,  0
      db 0,  0,  0,  0,  0,  0,  7,  0,  0,  3,  0,  0,  0,  0,  0,  0,  0,  0,  3,  0,  0,  7,  0,  0,  0,  0,  0,  0
      db 0,  0,  0,  0,  0,  0,  7,  0,  0,  3,  3,  3,  3,  3,  3,  3,  3,  3,  3,  0,  0,  7,  0,  0,  0,  0,  0,  0
      db 0,  0,  0,  0,  0,  0,  7,  0,  0,  3,  0,  0,  0,  0,  0,  0,  0,  0,  3,  0,  0,  7,  0,  0,  0,  0,  0,  0
      db 0,  0,  0,  0,  0,  0,  7,  0,  0,  3,  0,  0,  0,  0,  0,  0,  0,  0,  3,  0,  0,  7,  0,  0,  0,  0,  0,  0
      db 0,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  0,  0,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  0
      db 0,  7,  0,  0,  0,  0,  7,  0,  0,  0,  0,  0,  7,  0,  0,  7,  0,  0,  0,  0,  0,  7,  0,  0,  0,  0,  7,  0
      db 0,  7,  0,  0,  0,  0,  7,  0,  0,  0,  0,  0,  7,  0,  0,  7,  0,  0,  0,  0,  0,  7,  0,  0,  0,  0,  7,  0
      db 0, 15,  7,  7,  0,  0,  7,  7,  7,  7,  7,  7,  7,  3,  3,  7,  7,  7,  7,  7,  7,  7,  0,  0,  7,  7, 15,  0
      db 0,  0,  0,  7,  0,  0,  7,  0,  0,  7,  0,  0,  0,  0,  0,  0,  0,  0,  7,  0,  0,  7,  0,  0,  7,  0,  0,  0
      db 0,  0,  0,  7,  0,  0,  7,  0,  0,  7,  0,  0,  0,  0,  0,  0,  0,  0,  7,  0,  0,  7,  0,  0,  7,  0,  0,  0
      db 0,  7,  7,  7,  7,  7,  7,  0,  0,  7,  7,  7,  7,  0,  0,  7,  7,  7,  7,  0,  0,  7,  7,  7,  7,  7,  7,  0
      db 0,  7,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  7,  0,  0,  7,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  7,  0
      db 0,  7,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  7,  0,  0,  7,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  7,  0
      db 0,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  7,  0
      db 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0
; 1 - pacman can walk
; 2 -
; 4 - has pellet
; 8 - special

random dw 12345

last_key dw 0

quit db 0

points dd 0

pacman dw 0
    .x dw 0
    .y dw 0
    .old_x dw 0
    .old_y dw 0
    .tile_x dw 26
    .tile_y dw 13
    .dir    dw 0
    .old_dir dw 5
    .moved  db 0
    .state  dw 0
    .scared dw 0
    .speed dw 3

ghost_dir_cooldown dw 1

red_ghost dw 0
    .x dw 0
    .y dw 0
    .old_x dw 0
    .old_y dw 0
    .tile_x dw 14
    .tile_y dw 13
    .s_x dw 14
    .s_y dw 13
    .target_x dw 14
    .target_y dw 13
    .dir    dw 3
    .s_dir    dw 3
    .old_dir dw 5
    .dir_cooldown dw 0
    .moved  dw 1
    .state db 2
    .s_state db 2
    .tick dw 0
    .scared dw 0
    .speed dw 3

pink_ghost dw 0
    .x dw 0
    .y dw 0
    .old_x dw 0
    .old_y dw 0
    .tile_x dw 17
    .tile_y dw 13
    .s_x dw 17
    .s_y dw 13
    .target_x dw 17
    .target_y dw 13
    .dir    dw 2
    .s_dir    dw 2
    .old_dir dw 5
    .dir_cooldown dw 0
    .moved  dw 0
    .state db 1
    .s_state db 1
    .tick dw 6
    .scared dw 0
    .speed dw 3

cyan_ghost dw 0
    .x dw 0
    .y dw 0
    .old_x dw 0
    .old_y dw 0
    .tile_x dw 17
    .tile_y dw 11
    .s_x dw 17
    .s_y dw 11
    .target_x dw 17
    .target_y dw 11
    .dir    dw 0
    .s_dir    dw 0
    .old_dir dw 5
    .dir_cooldown dw 0
    .moved  dw 0
    .state db 0
    .s_state db 0
    .tick dw 1
    .scared dw 0
    .speed dw 3

yellow_ghost dw 0
    .x dw 0
    .y dw 0
    .old_x dw 0
    .old_y dw 0
    .tile_x dw 17
    .tile_y dw 15
    .s_x dw 17
    .s_y dw 15
    .target_x dw 17
    .target_y dw 15
    .dir    dw 0
    .s_dir    dw 0
    .old_dir dw 5
    .dir_cooldown dw 0
    .moved  dw 0
    .state db 0
    .s_state db 0
    .tick dw 1
    .scared dw 0
    .speed dw 3

scare_time equ 150

streak dw 0
bonus dw 200, 400, 800, 1600

fruits dw 100, 300, 500, 700, 1000, 2000, 3000, 5000
    .next dw 0
